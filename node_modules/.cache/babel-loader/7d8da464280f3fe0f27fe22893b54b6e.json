{"ast":null,"code":"var _s = $RefreshSig$();\n\nimport React, { useEffect, useContext } from \"react\";\nimport openSocket from \"socket.io-client\";\nimport { activeChatAction } from \"./stateManagement/actions\";\nimport { store } from \"./stateManagement/store\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst SOCKET_URL = \"http://localhost:9000/\";\nlet socket;\n\nconst SocketService = () => {\n  _s();\n\n  const {\n    state: {\n      userDetail\n    },\n    dispatch\n  } = useContext(store);\n\n  const setupSocket = () => {\n    socket = openSocket(SOCKET_URL);\n    socket.on(\"command\", data => {\n      if (!userDetail) return;\n      if (userDetail.id !== data.receiver) return;\n      dispatch({\n        type: activeChatAction,\n        payload: true\n      });\n    });\n  };\n\n  useEffect(setupSocket, [userDetail]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {}, void 0, false);\n};\n\n_s(SocketService, \"1IwCaeDlvC/vsKBDBFgGBffOUiM=\");\n\n_c = SocketService;\nexport default SocketService;\n\nconst sendSocket = data => {\n  socket.emit(\"command\", {\n    type: data.type,\n    id: data.id,\n    content: data.content\n  });\n};\n\nexport const sendTestSocket = data => {\n  socket.emit(\"command\", data);\n};\n\nvar _c;\n\n$RefreshReg$(_c, \"SocketService\");","map":{"version":3,"names":["React","useEffect","useContext","openSocket","activeChatAction","store","SOCKET_URL","socket","SocketService","state","userDetail","dispatch","setupSocket","on","data","id","receiver","type","payload","sendSocket","emit","content","sendTestSocket"],"sources":["F:/coding/python/Django_Project/chat_service/chatfrontend/src/socketService.js"],"sourcesContent":["import React, { useEffect, useContext } from \"react\";\nimport openSocket from \"socket.io-client\";\nimport { activeChatAction } from \"./stateManagement/actions\";\nimport { store } from \"./stateManagement/store\";\n\nconst SOCKET_URL = \"http://localhost:9000/\";\nlet socket;\n\nconst SocketService = () => {\n  const {\n    state: { userDetail },\n    dispatch,\n  } = useContext(store);\n\n  const setupSocket = () => {\n    socket = openSocket(SOCKET_URL);\n    socket.on(\"command\", (data) => {\n      if (!userDetail) return;\n      if (userDetail.id !== data.receiver) return;\n      dispatch({ type: activeChatAction, payload: true });\n    });\n  };\n\n  useEffect(setupSocket, [userDetail]);\n\n  return <></>;\n};\n\nexport default SocketService;\n\nconst sendSocket = (data) => {\n  socket.emit(\"command\", {\n    type: data.type,\n    id: data.id,\n    content: data.content,\n  });\n};\n\nexport const sendTestSocket = (data) => {\n  socket.emit(\"command\", data);\n};\n"],"mappings":";;AAAA,OAAOA,KAAP,IAAgBC,SAAhB,EAA2BC,UAA3B,QAA6C,OAA7C;AACA,OAAOC,UAAP,MAAuB,kBAAvB;AACA,SAASC,gBAAT,QAAiC,2BAAjC;AACA,SAASC,KAAT,QAAsB,yBAAtB;;;AAEA,MAAMC,UAAU,GAAG,wBAAnB;AACA,IAAIC,MAAJ;;AAEA,MAAMC,aAAa,GAAG,MAAM;EAAA;;EAC1B,MAAM;IACJC,KAAK,EAAE;MAAEC;IAAF,CADH;IAEJC;EAFI,IAGFT,UAAU,CAACG,KAAD,CAHd;;EAKA,MAAMO,WAAW,GAAG,MAAM;IACxBL,MAAM,GAAGJ,UAAU,CAACG,UAAD,CAAnB;IACAC,MAAM,CAACM,EAAP,CAAU,SAAV,EAAsBC,IAAD,IAAU;MAC7B,IAAI,CAACJ,UAAL,EAAiB;MACjB,IAAIA,UAAU,CAACK,EAAX,KAAkBD,IAAI,CAACE,QAA3B,EAAqC;MACrCL,QAAQ,CAAC;QAAEM,IAAI,EAAEb,gBAAR;QAA0Bc,OAAO,EAAE;MAAnC,CAAD,CAAR;IACD,CAJD;EAKD,CAPD;;EASAjB,SAAS,CAACW,WAAD,EAAc,CAACF,UAAD,CAAd,CAAT;EAEA,oBAAO,qCAAP;AACD,CAlBD;;GAAMF,a;;KAAAA,a;AAoBN,eAAeA,aAAf;;AAEA,MAAMW,UAAU,GAAIL,IAAD,IAAU;EAC3BP,MAAM,CAACa,IAAP,CAAY,SAAZ,EAAuB;IACrBH,IAAI,EAAEH,IAAI,CAACG,IADU;IAErBF,EAAE,EAAED,IAAI,CAACC,EAFY;IAGrBM,OAAO,EAAEP,IAAI,CAACO;EAHO,CAAvB;AAKD,CAND;;AAQA,OAAO,MAAMC,cAAc,GAAIR,IAAD,IAAU;EACtCP,MAAM,CAACa,IAAP,CAAY,SAAZ,EAAuBN,IAAvB;AACD,CAFM"},"metadata":{},"sourceType":"module"}